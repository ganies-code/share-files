const rrLogo = `<svg width="51" height="51" viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg" style="">
<path d="M30.2338 14.4714V14.4624C30.2338 14.4579 30.2338 14.4534 30.2338 14.4489C30.2202 14.2005 30.2022 13.9522 30.1751 13.7038C30.166 13.609 30.1525 13.5142 30.1435 13.4194C30.1299 13.3245 30.1209 13.2342 30.1073 13.1394C30.0938 13.0446 30.0802 12.9543 30.0667 12.8595C30.0532 12.7692 30.0351 12.6744 30.017 12.5795C30.008 12.5163 29.9945 12.4576 29.9809 12.3944C29.9719 12.3312 29.9583 12.2725 29.9448 12.2093C29.9222 12.0919 29.8951 11.97 29.868 11.8526C29.8409 11.7352 29.8138 11.6178 29.7822 11.5004C29.7235 11.2746 29.6603 11.0489 29.5926 10.8276H26.8066C24.0568 10.8276 21.3025 10.8276 18.5526 10.8276L18.7468 11.1708L19.0584 11.7261L25.2218 22.6757L26.5718 25.0733C27.073 24.4953 27.5336 23.8812 27.9445 23.231C28.2967 22.6757 28.6128 22.0932 28.8882 21.4927C28.9334 21.3978 28.974 21.303 29.0146 21.2082C29.0191 21.1947 29.0282 21.1811 29.0327 21.1676C29.0553 21.1179 29.0778 21.0637 29.1004 21.0095C29.1049 20.996 29.1094 20.9824 29.114 20.9689C29.1365 20.9192 29.1546 20.865 29.1772 20.8154C29.1998 20.7657 29.2178 20.7115 29.2404 20.6619C29.2539 20.6303 29.263 20.5986 29.2765 20.567C29.3126 20.4812 29.3442 20.3955 29.3759 20.3052C29.421 20.1832 29.4616 20.0613 29.5023 19.9394C29.5384 19.8356 29.57 19.7272 29.6061 19.6188C29.6377 19.515 29.6694 19.4066 29.701 19.2982C29.7822 19.0183 29.8545 18.7293 29.9132 18.4403C29.9267 18.3862 29.9358 18.332 29.9493 18.2778C29.9809 18.1333 30.008 17.9843 30.0351 17.8353C30.0532 17.7269 30.0712 17.6186 30.0893 17.5102C30.0983 17.4515 30.1073 17.3928 30.1164 17.3341C30.1254 17.2754 30.1344 17.2167 30.1389 17.158C30.1389 17.158 30.1389 17.158 30.1389 17.149C30.1389 17.1354 30.1389 17.1219 30.1435 17.1083C30.1435 17.1083 30.1435 17.1083 30.1435 17.0993C30.157 16.9864 30.1706 16.8735 30.1841 16.7562V16.7471C30.1976 16.6297 30.2067 16.5123 30.2157 16.3949C30.2157 16.3949 30.2157 16.3949 30.2157 16.3859C30.2157 16.3769 30.2157 16.3678 30.2157 16.3588C30.2157 16.3407 30.2157 16.3272 30.2157 16.3091C30.2247 16.2234 30.2292 16.133 30.2338 16.0473C30.2338 16.0247 30.2338 16.0021 30.2338 15.9795C30.2473 15.7267 30.2518 15.4693 30.2518 15.2119C30.2518 14.9546 30.2428 14.6972 30.2338 14.4443V14.4714Z" fill="url(#paint0_linear_5123_2241)"/>
<path d="M13.0531 10.1461H26.5178H29.367C29.3399 10.0693 29.3128 9.99709 29.2857 9.92485C29.2586 9.84809 29.2315 9.77584 29.1999 9.7036C29.0915 9.43268 28.9741 9.16628 28.8522 8.9044C28.8296 8.8457 28.8026 8.79152 28.7709 8.73282C28.7303 8.65154 28.6942 8.57027 28.649 8.48899C28.5497 8.29484 28.4504 8.10068 28.342 7.91104C28.3014 7.83879 28.2607 7.76655 28.2201 7.69882C28.1433 7.56788 28.0666 7.44145 27.9898 7.31502C27.9401 7.23826 27.895 7.1615 27.8453 7.08926C27.7731 6.98089 27.7008 6.87253 27.6286 6.76416C27.5699 6.67837 27.5112 6.59258 27.4525 6.51131C27.3667 6.38939 27.2809 6.272 27.1861 6.1546C27.1229 6.07332 27.0596 5.99205 26.9964 5.91078C26.9242 5.82047 26.8519 5.73016 26.7797 5.64437C26.7752 5.63534 26.7707 5.63083 26.7616 5.6218C26.7029 5.55407 26.6487 5.49086 26.59 5.42313C26.4952 5.31024 26.3959 5.19736 26.292 5.089C26.2198 5.01224 26.1475 4.93548 26.0798 4.85872C26.0166 4.7955 25.9579 4.73229 25.8947 4.66908C25.8541 4.62844 25.8134 4.5878 25.7728 4.54716C25.5967 4.37107 25.4115 4.19949 25.2219 4.03242C25.0774 3.90148 24.9284 3.77957 24.7794 3.65314C24.4949 3.41835 24.206 3.1971 23.9034 2.98488C23.8086 2.91715 23.7138 2.85394 23.619 2.78621C23.6009 2.77718 23.5874 2.76363 23.5693 2.7546C23.488 2.70042 23.4022 2.64624 23.321 2.59205C23.2216 2.52884 23.1178 2.46563 23.0184 2.40241C22.9191 2.3392 22.8152 2.2805 22.7114 2.2218C22.6256 2.17213 22.5398 2.12247 22.454 2.07731C22.3592 2.02313 22.2644 1.97346 22.1696 1.92379C22.1199 1.8967 22.0657 1.86961 22.0115 1.84252C21.9302 1.80188 21.8444 1.76124 21.7632 1.72061C21.6864 1.68448 21.6142 1.64836 21.5374 1.61224C21.5284 1.61224 21.5148 1.60321 21.5013 1.59869C21.4426 1.5716 21.3839 1.54451 21.3252 1.51742C20.5756 1.18329 19.7945 0.912374 18.9908 0.704671C18.9321 0.68661 18.8734 0.673064 18.8147 0.659519C18.756 0.645973 18.6973 0.632427 18.6341 0.618881L17.2298 3.02552L13.0531 10.1461Z" fill="url(#paint1_linear_5123_2241)"/>
<path d="M20.6968 16.0655L20.5027 16.3951L20.1776 16.9504L19.3738 18.3186L13.8697 27.6968L12.5196 29.9996C12.5196 29.9996 12.5557 30.0086 12.5738 30.0086C12.5738 30.0086 12.5783 30.0086 12.5828 30.0086C12.5918 30.0086 12.6009 30.0086 12.6144 30.0131C12.6731 30.0221 12.7318 30.0357 12.7905 30.0447L12.9485 30.0673C12.9576 30.0673 12.9711 30.0673 12.9847 30.0718C13.0027 30.0718 13.0208 30.0808 13.0434 30.0808C13.1427 30.0944 13.2375 30.1079 13.3369 30.1215C13.4543 30.135 13.5717 30.1486 13.6936 30.1621C13.6936 30.1621 13.6936 30.1621 13.6981 30.1621C13.7116 30.1621 13.7252 30.1621 13.7432 30.1621C13.7432 30.1621 13.7432 30.1621 13.7523 30.1621C13.8561 30.1712 13.9645 30.1847 14.0683 30.1892C14.0819 30.1892 14.0954 30.1892 14.109 30.1892C14.1993 30.1982 14.2851 30.2028 14.3754 30.2073C14.416 30.2073 14.4521 30.2163 14.4928 30.2163C14.7456 30.2299 14.9985 30.2344 15.2514 30.2344C15.5042 30.2344 15.7661 30.2253 16.0235 30.2163H16.0325C16.2854 30.2028 16.5337 30.1802 16.7866 30.1576C16.8317 30.1531 16.8769 30.1486 16.922 30.1441C17.0033 30.135 17.0846 30.126 17.1613 30.117C17.2878 30.0989 17.4097 30.0808 17.5361 30.0628C17.5858 30.0538 17.6354 30.0492 17.6851 30.0402C17.7483 30.0312 17.8161 30.0176 17.8793 30.0086C17.9244 29.9996 17.9696 29.9905 18.0147 29.9815C18.0238 29.9815 18.0373 29.9815 18.0463 29.977C18.1366 29.9589 18.2315 29.9409 18.3218 29.9228C18.4211 29.9002 18.5204 29.8822 18.6198 29.8596C18.6965 29.8415 18.7778 29.8235 18.8546 29.8009C18.9178 29.7874 18.9765 29.7693 19.0352 29.7557C19.0533 29.7557 19.0713 29.7467 19.0894 29.7422C19.1977 29.7151 19.3061 29.6835 19.4145 29.6519C19.577 29.6022 19.7396 29.5526 19.9021 29.4984C19.9789 29.4758 20.0557 29.4487 20.1324 29.4216C20.2498 29.381 20.3672 29.3358 20.4801 29.2952C20.602 29.25 20.7239 29.2004 20.8413 29.1552C22.7919 28.3696 24.5394 27.182 25.9888 25.701L24.7561 23.2673L20.6968 16.0519V16.0655Z" fill="url(#paint2_linear_5123_2241)"/>
<path d="M9.63038 14.6245L9.82906 14.2904L10.1496 13.7395L16.4891 2.92547L17.9295 0.469169C17.8799 0.460138 17.8347 0.451108 17.785 0.446593C17.7263 0.437562 17.6676 0.424016 17.6089 0.414986C17.5683 0.405955 17.5322 0.40144 17.4915 0.396925C17.4012 0.383379 17.3064 0.369833 17.2116 0.356287C17.1845 0.356287 17.1574 0.347257 17.1303 0.347257C17.0265 0.333711 16.9271 0.320165 16.8233 0.311135C16.6833 0.297589 16.5433 0.284043 16.3988 0.275012C16.3356 0.275012 16.2724 0.265982 16.2092 0.261467C16.146 0.261467 16.0828 0.252436 16.0196 0.252436C15.7622 0.23889 15.5048 0.234375 15.2474 0.234375C14.9901 0.234375 14.7327 0.243406 14.4753 0.252436C14.3489 0.261467 14.2225 0.265982 14.0915 0.275012C14.0283 0.275012 13.9651 0.284043 13.9019 0.293073C13.8387 0.297589 13.7754 0.306619 13.7122 0.311135C13.5858 0.32468 13.4594 0.338226 13.3375 0.356287C13.211 0.374348 13.0846 0.392409 12.9627 0.41047C12.8453 0.428532 12.7234 0.446593 12.606 0.469169C12.4886 0.491745 12.3757 0.509806 12.2628 0.532383C12.1409 0.554959 12.019 0.582051 11.9016 0.609142C11.7661 0.640749 11.6352 0.672356 11.4997 0.708478C11.4365 0.726539 11.3733 0.740085 11.3101 0.758146C10.9308 0.861997 10.5605 0.974879 10.1993 1.10582C9.95549 1.19161 9.71618 1.28192 9.48138 1.38577C7.46755 2.22561 5.67497 3.4944 4.21652 5.07474L5.51242 7.46332L9.63942 14.629L9.63038 14.6245Z" fill="url(#paint3_linear_5123_2241)"/>
<path d="M17.3062 20.4755H16.2767L3.84606 20.4845H1.17751C1.18654 20.5116 1.19557 20.5342 1.2046 20.5613C1.22266 20.6109 1.24072 20.6561 1.25878 20.7012C1.28136 20.7599 1.30393 20.8141 1.32651 20.8683C1.36263 20.9541 1.39876 21.0399 1.43488 21.1257C1.46649 21.1979 1.49809 21.2702 1.52518 21.3379C3.11458 24.9185 6.06759 27.7586 9.725 29.199C9.79724 29.2261 9.86949 29.2531 9.93722 29.2847C10.154 29.366 10.3752 29.4428 10.5965 29.515C10.7319 29.5602 10.8674 29.6008 11.0073 29.6415C11.0931 29.6685 11.1834 29.6911 11.2692 29.7182C11.3234 29.7318 11.3731 29.7453 11.4273 29.7589C11.4679 29.7679 11.504 29.7814 11.5447 29.7905C11.5898 29.804 11.635 29.813 11.6756 29.8266C11.6892 29.8266 11.7072 29.8356 11.7208 29.8356L13.125 27.6006L17.3062 20.4755Z" fill="url(#paint4_linear_5123_2241)"/>
<path d="M11.802 19.7849L11.6078 19.4462L11.2873 18.8953L5.05161 8.0587L3.68347 5.67915C3.34933 6.08553 3.03326 6.50996 2.73977 6.94794C2.50497 7.30013 2.28372 7.66136 2.08053 8.03612C2.03086 8.12643 1.98571 8.21222 1.93604 8.30252C1.93604 8.31155 1.92701 8.32059 1.92249 8.33413C1.87734 8.42444 1.83219 8.51023 1.78703 8.60053C1.69221 8.79017 1.60191 8.98433 1.51612 9.17849C1.49354 9.23267 1.46645 9.28234 1.44839 9.33652C1.41226 9.4178 1.37614 9.49907 1.34453 9.58486C1.31744 9.64807 1.29487 9.70677 1.26777 9.76999C1.2452 9.82868 1.22262 9.88738 1.20004 9.94608C1.14134 10.0951 1.08716 10.2441 1.03749 10.3976C1.00588 10.4924 0.974278 10.5872 0.94267 10.6821C0.847849 10.9801 0.762058 11.2781 0.685297 11.5851C0.662721 11.6799 0.635629 11.7748 0.617568 11.8741C0.599506 11.9509 0.581445 12.0321 0.563384 12.1134C0.545323 12.1857 0.531777 12.2579 0.518231 12.3256C0.50017 12.4114 0.482108 12.4972 0.468562 12.583C0.445986 12.7049 0.427924 12.8313 0.405348 12.9532C0.387287 13.0706 0.369225 13.1835 0.355679 13.3009V13.31C0.355679 13.3325 0.346649 13.3596 0.346649 13.3822C0.333103 13.477 0.324072 13.5764 0.315042 13.6712C0.315042 13.6802 0.315042 13.6847 0.315042 13.6938C0.315042 13.7073 0.315042 13.7163 0.315042 13.7299C0.306011 13.8428 0.292465 13.9556 0.283434 14.0685C0.283434 14.0866 0.283434 14.1092 0.278919 14.1272C0.269888 14.2401 0.265373 14.3485 0.256343 14.4613C0.242797 14.7187 0.238281 14.9761 0.238281 15.2335C0.238281 15.4908 0.247312 15.7392 0.256343 15.9875C0.256343 15.9965 0.256343 16.0101 0.256343 16.0191C0.265373 16.141 0.269888 16.2675 0.278919 16.3894C0.278919 16.4526 0.28795 16.5203 0.29698 16.5835C0.301496 16.6377 0.306011 16.6964 0.315042 16.7506C0.315042 16.7732 0.315042 16.8003 0.324072 16.8228C0.333103 16.9086 0.342133 16.9899 0.351164 17.0712C0.369225 17.2111 0.387287 17.3511 0.409863 17.4866C0.414379 17.5272 0.418894 17.5679 0.427924 17.6085C0.44147 17.6898 0.455016 17.771 0.468562 17.8478H0.459532C0.473078 17.9246 0.486624 17.9968 0.50017 18.0736C0.558869 18.3806 0.626598 18.6831 0.703359 18.9856C0.753027 19.1617 0.79818 19.3378 0.852364 19.5139C0.879456 19.6042 0.906548 19.6945 0.938155 19.7849H3.55252L11.802 19.7758V19.7849Z" fill="url(#paint5_linear_5123_2241)"/>
<defs>
<linearGradient id="paint0_linear_5123_2241" x1="30.9065" y1="21.2985" x2="20.6027" y2="9.1117" gradientUnits="userSpaceOnUse">
<stop stop-color="#D70000"/>
<stop offset="0.51" stop-color="#FF0000"/>
<stop offset="1" stop-color="#FF526E"/>
</linearGradient>
<linearGradient id="paint1_linear_5123_2241" x1="28.2788" y1="13.8576" x2="14.8729" y2="3.87877" gradientUnits="userSpaceOnUse">
<stop stop-color="#D70000"/>
<stop offset="0.51" stop-color="#FF0000"/>
<stop offset="1" stop-color="#FF526E"/>
</linearGradient>
<linearGradient id="paint2_linear_5123_2241" x1="19.2519" y1="30.2163" x2="19.2519" y2="15.5914" gradientUnits="userSpaceOnUse">
<stop stop-color="#D70000"/>
<stop offset="0.51" stop-color="#FF0000"/>
<stop offset="1" stop-color="#FF526E"/>
</linearGradient>
<linearGradient id="paint3_linear_5123_2241" x1="3.83724" y1="14.6787" x2="14.272" y2="-1.6802" gradientUnits="userSpaceOnUse">
<stop stop-color="#D70000"/>
<stop offset="0.51" stop-color="#FF0000"/>
<stop offset="1" stop-color="#FF526E"/>
</linearGradient>
<linearGradient id="paint4_linear_5123_2241" x1="4.93425" y1="26.3092" x2="16.0147" y2="17.8881" gradientUnits="userSpaceOnUse">
<stop stop-color="#D70000"/>
<stop offset="0.51" stop-color="#FF0000"/>
<stop offset="1" stop-color="#FF526E"/>
</linearGradient>
<linearGradient id="paint5_linear_5123_2241" x1="-0.696389" y1="12.4204" x2="13.0031" y2="13.8518" gradientUnits="userSpaceOnUse">
<stop stop-color="#D70000"/>
<stop offset="0.51" stop-color="#FF0000"/>
<stop offset="1" stop-color="#FF526E"/>
</linearGradient>
</defs>
</svg>`;
class RRNotification extends HTMLElement {
  static get observedAttributes() {
    return ["token", "notification-url"];
  }
  constructor() {
    super();
    this.attachShadow({ mode: "open" });

    // Template for the component
    this.shadowRoot.innerHTML = `
        <style>
          :host {
            
          }
          body{
          margin:0px
          }
          button {
            background: #4caf50;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            margin: 5px;
            border-radius: 3px;
          }
          button:hover {
            background: #45a049;
          }
        </style>
        <div style="height:100%;border:0px solid red;width:100%;position:absolute" id="notificationContainer">
         
        </div>
      `;
    this.init();
  }
  init() {
    this.getNotitfication();
    setInterval(() => {
      this.getNotitfication();
    }, 5000);
  }

  getNotitfication() {
    const token = this.getAttribute("token");
    console.log(token, "token");
    const url = this.getAttribute("notification-url");
    console.log(url, "url");
    const myHeaders = new Headers();
    myHeaders.append("accept", "application/json, text/plain, /");
    myHeaders.append("accept-language", "en-GB,en-US;q=0.9,en;q=0.8");
    myHeaders.append("authorization", `Bearer ${token}`);

    const requestOptions = {
      method: "GET",
      headers: myHeaders,
      redirect: "follow",
    };

    fetch(url, requestOptions)
      .then((response) => response.json())
      .then((result) => this.updateNotificationUI(result.data))
      .catch((error) => console.error(error));
  }

  updateNotificationUI(data) {
    this.shadowRoot.querySelector("#notificationContainer").innerHTML =
      data.notifications
        .map((d, i) => {
          return `<div style="border-bottom:1px solid #999; margin:10px;padding:5;display:flex">
    <div style="margin:6px">      
${
  d.actor.name
    ? `<div 
    style=" 
            font-size:22px;
            background:#e00;
            border-radius:30px;
            height:50px;width:50px;
            display:flex;align-items:center;
            justify-content:center;text-transform:uppercase;color:#eee">${d.actor.name[0]}</div>`
    : rrLogo
}</div>
 <div style="padding:3px"
 ><div style="font-size:18px;color:#333;">${
   d.actor.name ? d.actor.name : ""
 }  ${d.message}</div>
 <div style="font-size:12px;color:#aaa">${d.timestamp}</div>
 </div>
 
 </div>`;
        })
        .join("");
  }
}

// Register the component
customElements.define("rr-notification", RRNotification);
